pipeline {
    agent any
    
    tools {
        jdk 'JAVA11'
        maven 'Maven392'
    }
    
    environment {
        JAVA_HOME='${jdk}'
    }

    stages {
            stage('Which Java?') {
                steps {
                    sh 'java --version'
                }
            }
            stage ('Build') {
                steps {              
                    sh "mvn clean verify" 
                    echo "jdk installation path is: ${jdk}"

                    // next 2 are equivalents
                    sh "${jdk}/bin/java -version"

                    // note that simple quote strings are not evaluated by Groovy
                    // substitution is done by shell script using environment
                    sh '$JAVA_HOME/bin/java -version'        
                          
                }
            }

    }
}